{"ast":null,"code":"var _jsxFileName = \"/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/CategoryForm.js\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport avatar from \"./../images/default-user.png\";\nimport { useParams } from \"react-router-dom\";\nimport { toHaveFormValues } from \"@testing-library/jest-dom\";\nimport { HiBars3BottomLeft } from \"react-icons/hi2\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { useDispatch, useSelector } from \"react-redux\"; // import { useNavigate } from \"react-router-dom\";\n\nexport const CategoryForm = props => {\n  const [error, setError] = useState(\"\");\n  const params = useParams();\n  const [name, setName] = useState(\"\");\n  const [alias, setAlias] = useState(\"\");\n  const [enabled, setEnabled] = useState(null);\n  const [category, setCategory] = useState();\n  const dispatch = useDispatch();\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageData, setImageData] = useState(null);\n  const [imageName, setImageName] = useState(\"\");\n  const {\n    image\n  } = useSelector(state => state.upload);\n  const navigate = useNavigate(); // const history = useNavigate();\n  //check name\n\n  const checkName = e => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/check_name\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name: name,\n        id: params.id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n\n      if (result.message === \"Ok\") {\n        saveCategory();\n      } else {\n        setError(result.message);\n      }\n    });\n  };\n\n  const saveCategory = () => {\n    const id = params.id ? params.id : null;\n    const newCategory = {\n      id,\n      name,\n      alias,\n      enabled\n    };\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/save\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newCategory)\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      navigate(\"/categories\", {\n        state: {\n          message: result\n        }\n      });\n    }).then(() => {\n      console.log(\"Category saved\");\n    });\n  };\n\n  const handleUploadClick = event => {\n    let file = event.target.files[0];\n    const imageData = new FormData();\n    imageData.append(\"imageFile\", file);\n    setImageData(imageData);\n    setImagePreview(URL.createObjectURL(file));\n  };\n\n  useEffect(() => {\n    if (params.id) {\n      fetch(\"http://localhost:8082/ShoppingCartAdmin/category/get/\" + params.id, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        }\n      }).then(res => res.json()).then(result => {\n        console.log(result);\n        setName(result.name);\n        setAlias(result.alias);\n        setEnabled(result.enabled);\n      });\n    }\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Manage Category\")), React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    style: {\n      maxWidth: \"700px\",\n      margin: \"0 auto\"\n    } //   style=\"max-wid 700px; margin: 0 auto;\"\n    //   object=\"${user}\"\n    //   enctype=\"multipart/form-data\"\n    //   onsubmit=\"return checkEmailUnique(this);\"\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"border border-secondary rounded p-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Name:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"8\",\n    maxLength: \"128\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Alias:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"2\",\n    maxLength: \"45\",\n    value: alias,\n    onChange: e => setAlias(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Enabled:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    defaultChecked: enabled,\n    onChange: e => setEnabled(!enabled),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Photos:\", \" \"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    accept: \"image/*\",\n    id: \"upload-profile-image\",\n    type: \"file\",\n    onChange: handleUploadClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    src: avatar,\n    alt: \"Photos Review\",\n    id: \"thumbmail\",\n    className: \"img-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Save\",\n    className: \"btn btn-primary m-3\",\n    onClick: e => {\n      checkName(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Cancel\",\n    className: \"btn btn-secondary\",\n    id: \"buttonCancel\",\n    onClick: () => {\n      navigate(\"/categories\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  })))), React.createElement(Modal, {\n    show: error === \"\" ? false : true,\n    onHide: () => {\n      setError(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, \"Oops! There was a problem\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, error), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => {\n      setError(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, \"Close\"))));\n};","map":{"version":3,"sources":["/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/CategoryForm.js"],"names":["React","useState","useEffect","avatar","useParams","toHaveFormValues","HiBars3BottomLeft","useNavigate","Button","Modal","useDispatch","useSelector","CategoryForm","props","error","setError","params","name","setName","alias","setAlias","enabled","setEnabled","category","setCategory","dispatch","imagePreview","setImagePreview","imageData","setImageData","imageName","setImageName","image","state","upload","navigate","checkName","e","preventDefault","fetch","method","headers","body","JSON","stringify","id","then","res","json","result","console","log","message","saveCategory","newCategory","handleUploadClick","event","file","target","files","FormData","append","URL","createObjectURL","Accept","maxWidth","margin","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport avatar from \"./../images/default-user.png\";\nimport { useParams } from \"react-router-dom\";\nimport { toHaveFormValues } from \"@testing-library/jest-dom\";\nimport { HiBars3BottomLeft } from \"react-icons/hi2\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n// import { useNavigate } from \"react-router-dom\";\nexport const CategoryForm = (props) => {\n  const [error, setError] = useState(\"\");\n  const params = useParams();\n  const [name, setName] = useState(\"\");\n  const [alias, setAlias] = useState(\"\");\n  const [enabled, setEnabled] = useState(null);\n  const [category, setCategory] = useState();\n  const dispatch = useDispatch();\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageData, setImageData] = useState(null);\n  const [imageName, setImageName] = useState(\"\");\n\n  const { image } = useSelector((state) => state.upload);\n  const navigate = useNavigate();\n  // const history = useNavigate();\n\n  //check name\n  const checkName = (e) => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/check_name\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        name: name,\n        id: params.id,\n      }),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        if (result.message === \"Ok\") {\n          saveCategory();\n        } else {\n          setError(result.message);\n        }\n      });\n  };\n\n  const saveCategory = () => {\n    const id = params.id ? params.id : null;\n    const newCategory = {\n      id,\n      name,\n      alias,\n      enabled,\n    };\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/save\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newCategory),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        navigate(\"/categories\", { state: { message: result } });\n      })\n      .then(() => {\n        console.log(\"Category saved\");\n      });\n  };\n  const handleUploadClick = (event) => {\n    let file = event.target.files[0];\n    const imageData = new FormData();\n    imageData.append(\"imageFile\", file);\n    setImageData(imageData);\n    setImagePreview(URL.createObjectURL(file));\n  };\n\n  useEffect(() => {\n    if (params.id) {\n      fetch(\n        \"http://localhost:8082/ShoppingCartAdmin/category/get/\" + params.id,\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((result) => {\n          console.log(result);\n          setName(result.name);\n          setAlias(result.alias);\n          setEnabled(result.enabled);\n        });\n    }\n  }, []);\n  return (\n    <>\n      <div>\n        <h2 className=\"text-center\">Manage Category</h2>\n      </div>\n      <form\n        action=\"\"\n        method=\"post\"\n        style={{ maxWidth: \"700px\", margin: \"0 auto\" }}\n        //   style=\"max-wid 700px; margin: 0 auto;\"\n        //   object=\"${user}\"\n        //   enctype=\"multipart/form-data\"\n        //   onsubmit=\"return checkEmailUnique(this);\"\n      >\n        <div className=\"border border-secondary rounded p-3\">\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Name:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"8\"\n                maxLength=\"128\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Alias:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"2\"\n                maxLength=\"45\"\n                value={alias}\n                onChange={(e) => setAlias(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form label\">\n              Enabled:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"checkbox\"\n                defaultChecked={enabled}\n                onChange={(e) => setEnabled(!enabled)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Photos:{\" \"}\n            </label>\n            <div className=\"col-sm-8\">\n              {/* <input type=\"hidden\" field=\"*{photos}\" /> */}\n              <input\n                accept=\"image/*\"\n                id=\"upload-profile-image\"\n                type=\"file\"\n                onChange={handleUploadClick}\n              />\n              <img\n                src={avatar}\n                alt=\"Photos Review\"\n                id=\"thumbmail\"\n                className=\"img-fluid\"\n              />\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <input\n              type=\"submit\"\n              value=\"Save\"\n              className=\"btn btn-primary m-3\"\n              onClick={(e) => {\n                checkName(e);\n              }}\n            />\n            <input\n              type=\"button\"\n              value=\"Cancel\"\n              className=\"btn btn-secondary\"\n              id=\"buttonCancel\"\n              onClick={() => {\n                navigate(\"/categories\");\n              }}\n            />\n          </div>\n        </div>\n      </form>\n      <Modal\n        show={error === \"\" ? false : true}\n        onHide={() => {\n          setError(\"\");\n        }}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Oops! There was a problem</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{error}</Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"secondary\"\n            onClick={() => {\n              setError(\"\");\n            }}\n          >\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}