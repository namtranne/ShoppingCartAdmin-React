{"ast":null,"code":"var _jsxFileName = \"/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/UserForm.js\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport avatar from \"./../images/default-user.png\";\nimport { useParams } from \"react-router-dom\";\nimport { toHaveFormValues } from \"@testing-library/jest-dom\";\nimport { HiBars3BottomLeft } from \"react-icons/hi2\";\nimport { useNavigate } from \"react-router-dom\"; // import { useNavigate } from \"react-router-dom\";\n\nexport const UserForm = props => {\n  const params = useParams();\n  const [Roles, setRoles] = useState([]);\n  const [email, setEmail] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [roles, setUserRoles] = useState([]);\n  const [enabled, setEnabled] = useState(null);\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState();\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const checkEmail = e => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/users/check_email\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(email)\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n\n      if (result.message === \"Ok\") {\n        saveUser();\n      } else {\n        setError(result.message);\n      }\n    });\n  }; //save user\n\n\n  const saveUser = () => {\n    const id = params.id ? params.id : null;\n    const newUser = {\n      id,\n      email,\n      firstName,\n      lastName,\n      roles,\n      enabled,\n      password\n    };\n    console.log(newUser);\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/users/save\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newUser)\n    }).then(res => res.json()).then(result => {\n      console.log(result); // window.location.href = \"/users\";\n\n      navigate(\"/users\", {\n        state: {\n          message: result\n        }\n      });\n    });\n  }; //check role\n\n\n  const handleRoleChange = (role, event) => {\n    let checked = !event.target.checked;\n\n    if (checked) {\n      console.log(\"Clearing\");\n      setUserRoles([...roles].filter(element => element.name !== role.name));\n    } else {\n      setUserRoles([...roles, role]);\n    }\n  };\n\n  const hasRole = role => {\n    var check = false;\n\n    if (roles.length == 0) {\n      return false;\n    }\n\n    roles.forEach(element => {\n      if (element.id == role.id) {\n        check = true;\n      }\n    });\n    return check;\n  }; //load data\n\n\n  useEffect(() => {\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/role/getAll\").then(res => res.json()).then(result => {\n      setRoles(result);\n    });\n\n    if (params.id) {\n      fetch(\"http://localhost:8082/ShoppingCartAdmin/user/get/\" + params.id).then(res => res.json()).then(result => {\n        setUser(result);\n        setEmail(result.email);\n        setFirstName(result.firstName);\n        setLastName(result.lastName);\n        setEnabled(result.enabled);\n        setPassword(result.password);\n        setUserRoles(result.roles);\n      });\n    }\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Manage Users - Create new User\")), React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    style: {\n      maxWidth: \"700px\",\n      margin: \"0 auto\"\n    } //   style=\"max-wid 700px; margin: 0 auto;\"\n    //   object=\"${user}\"\n    //   enctype=\"multipart/form-data\"\n    //   onsubmit=\"return checkEmailUnique(this);\"\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"hidden\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"border border-secondary rounded p-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"E-mail:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"8\",\n    maxLength: \"128\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"First Name:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"2\",\n    maxLength: \"45\",\n    value: firstName,\n    onChange: e => setFirstName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"Last Name:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"2\",\n    maxLength: \"45\",\n    value: lastName,\n    onChange: e => setLastName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"Password:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"Roles: \"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, Roles.map((role, index) => {\n    return React.createElement(\"div\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      text: role.name,\n      value: role.id,\n      checked: hasRole(role),\n      onChange: event => handleRoleChange(role, event),\n      className: \"m-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), \"- \", React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, role.description), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }));\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Enabled:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    defaultChecked: enabled,\n    onChange: e => setEnabled(!enabled),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \"Photos:\", \" \"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"file\",\n    id: \"fileImage\",\n    name: \"image\",\n    accept: \"image/png, image/jpg\",\n    className: \"mb-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    src: avatar,\n    alt: \"Photos Review\",\n    id: \"thumbmail\",\n    className: \"img-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Save\",\n    className: \"btn btn-primary m-3\",\n    onClick: e => {\n      checkEmail(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Cancel\",\n    className: \"btn btn-secondary\",\n    id: \"buttonCancel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"modal fade text-center\",\n    id: \"modalDialog\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"modal-title\",\n    id: \"modalTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, \"Error\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    \"data-dismiss\": \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, \"\\xD7\")), React.createElement(\"div\", {\n    className: \"modal-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"modalBody\",\n    id: \"modalBody\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {\n      setError(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278\n    },\n    __self: this\n  }, \"Close\"))))));\n};","map":{"version":3,"sources":["/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/UserForm.js"],"names":["React","useState","useEffect","avatar","useParams","toHaveFormValues","HiBars3BottomLeft","useNavigate","UserForm","props","params","Roles","setRoles","email","setEmail","firstName","setFirstName","lastName","setLastName","roles","setUserRoles","enabled","setEnabled","password","setPassword","user","setUser","error","setError","navigate","checkEmail","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","result","console","log","message","saveUser","id","newUser","state","handleRoleChange","role","event","checked","target","filter","element","name","hasRole","check","length","forEach","maxWidth","margin","value","map","index","description"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,iBAAT,QAAkC,iBAAlC;AACA,SAASC,WAAT,QAA4B,kBAA5B,C,CACA;;AACA,OAAO,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AACjC,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACkB,KAAD,EAAQC,YAAR,IAAwBnB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACoB,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACsB,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACwB,IAAD,EAAOC,OAAP,IAAkBzB,QAAQ,EAAhC;AACA,QAAM,CAAC0B,KAAD,EAAQC,QAAR,IAAoB3B,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM4B,QAAQ,GAAGtB,WAAW,EAA5B;;AAEA,QAAMuB,UAAU,GAAIC,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,KAAK,CAAC,2DAAD,EAA8D;AACjEC,MAAAA,MAAM,EAAE,MADyD;AAEjEC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFwD;AAGjEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAezB,KAAf;AAH2D,KAA9D,CAAL,CAKG0B,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSG,MAAD,IAAY;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAIA,MAAM,CAACG,OAAP,KAAmB,IAAvB,EAA6B;AAC3BC,QAAAA,QAAQ;AACT,OAFD,MAEO;AACLlB,QAAAA,QAAQ,CAACc,MAAM,CAACG,OAAR,CAAR;AACD;AACF,KAbH;AAcD,GAhBD,CAbiC,CA8BjC;;;AACA,QAAMC,QAAQ,GAAG,MAAM;AACrB,UAAMC,EAAE,GAAGrC,MAAM,CAACqC,EAAP,GAAYrC,MAAM,CAACqC,EAAnB,GAAwB,IAAnC;AACA,UAAMC,OAAO,GAAG;AACdD,MAAAA,EADc;AAEdlC,MAAAA,KAFc;AAGdE,MAAAA,SAHc;AAIdE,MAAAA,QAJc;AAKdE,MAAAA,KALc;AAMdE,MAAAA,OANc;AAOdE,MAAAA;AAPc,KAAhB;AASAoB,IAAAA,OAAO,CAACC,GAAR,CAAYI,OAAZ;AACAf,IAAAA,KAAK,CAAC,oDAAD,EAAuD;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFiD;AAG1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeU,OAAf;AAHoD,KAAvD,CAAL,CAKGT,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSG,MAAD,IAAY;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ,EADgB,CAEhB;;AACAb,MAAAA,QAAQ,CAAC,QAAD,EAAW;AAAEoB,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AAAT,OAAX,CAAR;AACD,KAVH;AAWD,GAvBD,CA/BiC,CAwDjC;;;AACA,QAAMQ,gBAAgB,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACxC,QAAIC,OAAO,GAAG,CAACD,KAAK,CAACE,MAAN,CAAaD,OAA5B;;AACA,QAAIA,OAAJ,EAAa;AACXV,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAxB,MAAAA,YAAY,CAAC,CAAC,GAAGD,KAAJ,EAAWoC,MAAX,CAAmBC,OAAD,IAAaA,OAAO,CAACC,IAAR,KAAiBN,IAAI,CAACM,IAArD,CAAD,CAAZ;AACD,KAHD,MAGO;AACLrC,MAAAA,YAAY,CAAC,CAAC,GAAGD,KAAJ,EAAWgC,IAAX,CAAD,CAAZ;AACD;AACF,GARD;;AASA,QAAMO,OAAO,GAAIP,IAAD,IAAU;AACxB,QAAIQ,KAAK,GAAG,KAAZ;;AACA,QAAIxC,KAAK,CAACyC,MAAN,IAAgB,CAApB,EAAuB;AACrB,aAAO,KAAP;AACD;;AACDzC,IAAAA,KAAK,CAAC0C,OAAN,CAAeL,OAAD,IAAa;AACzB,UAAIA,OAAO,CAACT,EAAR,IAAcI,IAAI,CAACJ,EAAvB,EAA2B;AACzBY,QAAAA,KAAK,GAAG,IAAR;AACD;AACF,KAJD;AAKA,WAAOA,KAAP;AACD,GAXD,CAlEiC,CA+EjC;;;AACAzD,EAAAA,SAAS,CAAC,MAAM;AACd+B,IAAAA,KAAK,CAAC,qDAAD,CAAL,CACGM,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,MAAD,IAAY;AAChB9B,MAAAA,QAAQ,CAAC8B,MAAD,CAAR;AACD,KAJH;;AAKA,QAAIhC,MAAM,CAACqC,EAAX,EAAe;AACbd,MAAAA,KAAK,CAAC,sDAAsDvB,MAAM,CAACqC,EAA9D,CAAL,CACGR,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,MAAD,IAAY;AAChBhB,QAAAA,OAAO,CAACgB,MAAD,CAAP;AACA5B,QAAAA,QAAQ,CAAC4B,MAAM,CAAC7B,KAAR,CAAR;AACAG,QAAAA,YAAY,CAAC0B,MAAM,CAAC3B,SAAR,CAAZ;AACAG,QAAAA,WAAW,CAACwB,MAAM,CAACzB,QAAR,CAAX;AACAK,QAAAA,UAAU,CAACoB,MAAM,CAACrB,OAAR,CAAV;AACAG,QAAAA,WAAW,CAACkB,MAAM,CAACnB,QAAR,CAAX;AACAH,QAAAA,YAAY,CAACsB,MAAM,CAACvB,KAAR,CAAZ;AACD,OAVH;AAWD;AACF,GAnBQ,EAmBN,EAnBM,CAAT;AAoBA,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADF,CADF,EAIE;AACE,IAAA,MAAM,EAAC,EADT;AAEE,IAAA,MAAM,EAAC,MAFT;AAGE,IAAA,KAAK,EAAE;AAAE2C,MAAAA,QAAQ,EAAE,OAAZ;AAAqBC,MAAAA,MAAM,EAAE;AAA7B,KAHT,CAIE;AACA;AACA;AACA;AAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,EAUE;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,SAAS,EAAC,GAJZ;AAKE,IAAA,SAAS,EAAC,KALZ;AAME,IAAA,KAAK,EAAElD,KANT;AAOE,IAAA,QAAQ,EAAGkB,CAAD,IAAOjB,QAAQ,CAACiB,CAAC,CAACuB,MAAF,CAASU,KAAV,CAP3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CADF,EAkBE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,SAAS,EAAC,GAJZ;AAKE,IAAA,SAAS,EAAC,IALZ;AAME,IAAA,KAAK,EAAEjD,SANT;AAOE,IAAA,QAAQ,EAAGgB,CAAD,IAAOf,YAAY,CAACe,CAAC,CAACuB,MAAF,CAASU,KAAV,CAP/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CAlBF,EAmCE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,SAAS,EAAC,GAJZ;AAKE,IAAA,SAAS,EAAC,IALZ;AAME,IAAA,KAAK,EAAE/C,QANT;AAOE,IAAA,QAAQ,EAAGc,CAAD,IAAOb,WAAW,CAACa,CAAC,CAACuB,MAAF,CAASU,KAAV,CAP9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CAnCF,EAmDE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,KAAK,EAAEzC,QAHT;AAIE,IAAA,QAAQ,EAAGQ,CAAD,IAAOP,WAAW,CAACO,CAAC,CAACuB,MAAF,CAASU,KAAV,CAJ9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CAnDF,EAiEE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrD,KAAK,CAACsD,GAAN,CAAU,CAACd,IAAD,EAAOe,KAAP,KAAiB;AAC1B,WACE;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAEf,IAAI,CAACM,IAFb;AAGE,MAAA,KAAK,EAAEN,IAAI,CAACJ,EAHd;AAIE,MAAA,OAAO,EAAEW,OAAO,CAACP,IAAD,CAJlB;AAKE,MAAA,QAAQ,EAAGC,KAAD,IAAWF,gBAAgB,CAACC,IAAD,EAAOC,KAAP,CALvC;AAME,MAAA,SAAS,EAAC,KANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,QASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQD,IAAI,CAACgB,WAAb,CATJ,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,CADF;AAcD,GAfA,CADH,CAFF,CAjEF,EAuFE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,cAAc,EAAE9C,OAFlB;AAGE,IAAA,QAAQ,EAAGU,CAAD,IAAOT,UAAU,CAAC,CAACD,OAAF,CAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CAvFF,EAoGE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,EAAf;AAAkB,IAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACU,GADV,CADF,EAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,EAAE,EAAC,WAFL;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,IAAA,MAAM,EAAC,sBAJT;AAKE,IAAA,SAAS,EAAC,MALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EASE;AACE,IAAA,GAAG,EAAElB,MADP;AAEE,IAAA,GAAG,EAAC,eAFN;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,SAAS,EAAC,WAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAJF,CApGF,EAyHE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,SAAS,EAAC,qBAHZ;AAIE,IAAA,OAAO,EAAG4B,CAAD,IAAO;AACdD,MAAAA,UAAU,CAACC,CAAD,CAAV;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,QAFR;AAGE,IAAA,SAAS,EAAC,mBAHZ;AAIE,IAAA,EAAE,EAAC,cAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAzHF,CAVF,CAJF,EAyJE;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,EAAE,EAAC,aAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,aAAd;AAA4B,IAAA,EAAE,EAAC,YAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAIE;AAAQ,IAAA,SAAS,EAAC,OAAlB;AAA0B,IAAA,IAAI,EAAC,QAA/B;AAAwC,oBAAa,OAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,CADF,EASE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,WAAhB;AAA4B,IAAA,EAAE,EAAC,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CATF,EAYE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,gBAFZ;AAGE,oBAAa,OAHf;AAIE,IAAA,OAAO,EAAE,MAAM;AACbH,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAZF,CADF,CADF,CAzJF,CADF;AAyLD,CA7RM","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport avatar from \"./../images/default-user.png\";\nimport { useParams } from \"react-router-dom\";\nimport { toHaveFormValues } from \"@testing-library/jest-dom\";\nimport { HiBars3BottomLeft } from \"react-icons/hi2\";\nimport { useNavigate } from \"react-router-dom\";\n// import { useNavigate } from \"react-router-dom\";\nexport const UserForm = (props) => {\n  const params = useParams();\n  const [Roles, setRoles] = useState([]);\n  const [email, setEmail] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [roles, setUserRoles] = useState([]);\n  const [enabled, setEnabled] = useState(null);\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState();\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const checkEmail = (e) => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/users/check_email\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(email),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        if (result.message === \"Ok\") {\n          saveUser();\n        } else {\n          setError(result.message);\n        }\n      });\n  };\n  //save user\n  const saveUser = () => {\n    const id = params.id ? params.id : null;\n    const newUser = {\n      id,\n      email,\n      firstName,\n      lastName,\n      roles,\n      enabled,\n      password,\n    };\n    console.log(newUser);\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/users/save\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newUser),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        // window.location.href = \"/users\";\n        navigate(\"/users\", { state: { message: result } });\n      });\n  };\n\n  //check role\n  const handleRoleChange = (role, event) => {\n    let checked = !event.target.checked;\n    if (checked) {\n      console.log(\"Clearing\");\n      setUserRoles([...roles].filter((element) => element.name !== role.name));\n    } else {\n      setUserRoles([...roles, role]);\n    }\n  };\n  const hasRole = (role) => {\n    var check = false;\n    if (roles.length == 0) {\n      return false;\n    }\n    roles.forEach((element) => {\n      if (element.id == role.id) {\n        check = true;\n      }\n    });\n    return check;\n  };\n\n  //load data\n  useEffect(() => {\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/role/getAll\")\n      .then((res) => res.json())\n      .then((result) => {\n        setRoles(result);\n      });\n    if (params.id) {\n      fetch(\"http://localhost:8082/ShoppingCartAdmin/user/get/\" + params.id)\n        .then((res) => res.json())\n        .then((result) => {\n          setUser(result);\n          setEmail(result.email);\n          setFirstName(result.firstName);\n          setLastName(result.lastName);\n          setEnabled(result.enabled);\n          setPassword(result.password);\n          setUserRoles(result.roles);\n        });\n    }\n  }, []);\n  return (\n    <>\n      <div>\n        <h2 className=\"text-center\">Manage Users - Create new User</h2>\n      </div>\n      <form\n        action=\"\"\n        method=\"post\"\n        style={{ maxWidth: \"700px\", margin: \"0 auto\" }}\n        //   style=\"max-wid 700px; margin: 0 auto;\"\n        //   object=\"${user}\"\n        //   enctype=\"multipart/form-data\"\n        //   onsubmit=\"return checkEmailUnique(this);\"\n      >\n        <input type=\"hidden\" />\n        <div className=\"border border-secondary rounded p-3\">\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              E-mail:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                required\n                minLength=\"8\"\n                maxLength=\"128\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              First Name:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"2\"\n                maxLength=\"45\"\n                value={firstName}\n                onChange={(e) => setFirstName(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Last Name:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"2\"\n                maxLength=\"45\"\n                value={lastName}\n                onChange={(e) => setLastName(e.target.value)}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Password:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label className=\"col-sm-4 col-form-label\">Roles: </label>\n            <div className=\"col-sm-8\">\n              {Roles.map((role, index) => {\n                return (\n                  <div key={index}>\n                    <input\n                      type=\"checkbox\"\n                      text={role.name}\n                      value={role.id}\n                      checked={hasRole(role)}\n                      onChange={(event) => handleRoleChange(role, event)}\n                      className=\"m-2\"\n                    />\n                    - <small>{role.description}</small>\n                    <br />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form label\">\n              Enabled:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"checkbox\"\n                defaultChecked={enabled}\n                onChange={(e) => setEnabled(!enabled)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Photos:{\" \"}\n            </label>\n            <div className=\"col-sm-8\">\n              {/* <input type=\"hidden\" field=\"*{photos}\" /> */}\n              <input\n                type=\"file\"\n                id=\"fileImage\"\n                name=\"image\"\n                accept=\"image/png, image/jpg\"\n                className=\"mb-2\"\n              />\n              <img\n                src={avatar}\n                alt=\"Photos Review\"\n                id=\"thumbmail\"\n                className=\"img-fluid\"\n              />\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <input\n              type=\"submit\"\n              value=\"Save\"\n              className=\"btn btn-primary m-3\"\n              onClick={(e) => {\n                checkEmail(e);\n              }}\n            />\n            <input\n              type=\"button\"\n              value=\"Cancel\"\n              className=\"btn btn-secondary\"\n              id=\"buttonCancel\"\n            />\n          </div>\n        </div>\n      </form>\n      <div className=\"modal fade text-center\" id=\"modalDialog\">\n        <div className=\"modal-dialog\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h4 className=\"modal-title\" id=\"modalTitle\">\n                Error\n              </h4>\n              <button className=\"close\" type=\"button\" data-dismiss=\"modal\">\n                &times;\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <span className=\"modalBody\" id=\"modalBody\"></span>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-danger\"\n                data-dismiss=\"modal\"\n                onClick={() => {\n                  setError(\"\");\n                }}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}