{"ast":null,"code":"var _jsxFileName = \"/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/CategoryForm.js\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { storage } from \"../base\";\nimport { ref, uploadBytesResumable, getDownloadURL, uploadBytes } from \"firebase/storage\";\nexport const CategoryForm = props => {\n  const [error, setError] = useState(\"\");\n  const params = useParams();\n  const [name, setName] = useState(\"\");\n  const [alias, setAlias] = useState(\"\");\n  const [enabled, setEnabled] = useState(null);\n  const [percent, setPercent] = useState(\"\"); // const dispatch = useDispatch();\n\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageData, setImageData] = useState(new FormData()); // const { image } = useSelector((state) => state.upload);\n\n  const navigate = useNavigate(); // const history = useNavigate();\n  //check name\n\n  const checkName = e => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/check_name\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name: name,\n        id: params.id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n\n      if (result.message === \"Ok\") {\n        saveCategory();\n      } else {\n        setError(result.message);\n      }\n    });\n  };\n\n  const saveCategory = () => {\n    imageData.append(\"name\", name);\n    imageData.append(\"id\", params.id ? params.id : \"\");\n    imageData.append(\"alias\", alias);\n    imageData.append(\"enabled\", enabled);\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/save\", {\n      method: \"POST\",\n      body: imageData\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      navigate(\"/categories\", {\n        state: {\n          message: result\n        }\n      });\n    }).then(() => {\n      console.log(\"Category saved\");\n    });\n  };\n\n  const handleUploadClick = event => {\n    let file = event.target.files[0];\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    setImageData(formData);\n    setImagePreview(URL.createObjectURL(file));\n    const storageRef = ref(storage, `/images/${file.name}`); // progress can be paused and resumed. It also exposes progress updates. // Receives the storage reference and the file to upload.\n\n    uploadBytes(storageRef, file).then(() => {\n      alert;\n    });\n  };\n\n  useEffect(() => {\n    if (params.id) {\n      fetch(\"http://localhost:8082/ShoppingCartAdmin/category/get/\" + params.id, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        }\n      }).then(res => res.json()).then(result => {\n        console.log(result);\n        setName(result.name);\n        setAlias(result.alias);\n        setEnabled(result.enabled);\n      });\n    }\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Manage Category\")), React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    style: {\n      maxWidth: \"700px\",\n      margin: \"0 auto\"\n    } //   style=\"max-wid 700px; margin: 0 auto;\"\n    //   object=\"${user}\"\n    //   enctype=\"multipart/form-data\"\n    //   onsubmit=\"return checkEmailUnique(this);\"\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"border border-secondary rounded p-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Name:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"8\",\n    maxLength: \"128\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Alias:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    minLength: \"2\",\n    maxLength: \"45\",\n    value: alias,\n    onChange: e => setAlias(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"Enabled:\"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    defaultChecked: enabled,\n    onChange: e => setEnabled(!enabled),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"col-sm-4 col-form-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Photos:\", \" \"), React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    accept: \"image/*\",\n    id: \"upload-profile-image\",\n    type: \"file\",\n    onChange: handleUploadClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    src: imagePreview !== null ? imagePreview : \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\",\n    alt: \"Photos Review\",\n    id: \"thumbmail\",\n    className: \"img-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Save\",\n    className: \"btn btn-primary m-3\",\n    onClick: e => {\n      checkName(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Cancel\",\n    className: \"btn btn-secondary\",\n    id: \"buttonCancel\",\n    onClick: () => {\n      navigate(\"/categories\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  })))), React.createElement(Modal, {\n    show: error === \"\" ? false : true,\n    onHide: () => {\n      setError(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, \"Oops! There was a problem\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, error), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => {\n      setError(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Close\"))));\n};","map":{"version":3,"sources":["/Users/tranhainam/Downloads/ReactMultiPageWebsite-master/src/components/CategoryForm.js"],"names":["React","useState","useEffect","useParams","useNavigate","Button","Modal","storage","ref","uploadBytesResumable","getDownloadURL","uploadBytes","CategoryForm","props","error","setError","params","name","setName","alias","setAlias","enabled","setEnabled","percent","setPercent","imagePreview","setImagePreview","imageData","setImageData","FormData","navigate","checkName","e","preventDefault","fetch","method","headers","body","JSON","stringify","id","then","res","json","result","console","log","message","saveCategory","append","state","handleUploadClick","event","file","target","files","formData","URL","createObjectURL","storageRef","alert","Accept","maxWidth","margin","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { storage } from \"../base\";\nimport {\n  ref,\n  uploadBytesResumable,\n  getDownloadURL,\n  uploadBytes,\n} from \"firebase/storage\";\nexport const CategoryForm = (props) => {\n  const [error, setError] = useState(\"\");\n  const params = useParams();\n  const [name, setName] = useState(\"\");\n  const [alias, setAlias] = useState(\"\");\n  const [enabled, setEnabled] = useState(null);\n  const [percent, setPercent] = useState(\"\");\n  // const dispatch = useDispatch();\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageData, setImageData] = useState(new FormData());\n\n  // const { image } = useSelector((state) => state.upload);\n  const navigate = useNavigate();\n  // const history = useNavigate();\n\n  //check name\n  const checkName = (e) => {\n    e.preventDefault();\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/check_name\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        name: name,\n        id: params.id,\n      }),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        if (result.message === \"Ok\") {\n          saveCategory();\n        } else {\n          setError(result.message);\n        }\n      });\n  };\n\n  const saveCategory = () => {\n    imageData.append(\"name\", name);\n    imageData.append(\"id\", params.id ? params.id : \"\");\n    imageData.append(\"alias\", alias);\n    imageData.append(\"enabled\", enabled);\n\n    fetch(\"http://localhost:8082/ShoppingCartAdmin/categories/save\", {\n      method: \"POST\",\n      body: imageData,\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        navigate(\"/categories\", { state: { message: result } });\n      })\n      .then(() => {\n        console.log(\"Category saved\");\n      });\n  };\n  const handleUploadClick = (event) => {\n    let file = event.target.files[0];\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    setImageData(formData);\n    setImagePreview(URL.createObjectURL(file));\n    const storageRef = ref(storage, `/images/${file.name}`); // progress can be paused and resumed. It also exposes progress updates. // Receives the storage reference and the file to upload.\n    uploadBytes(storageRef, file).then(() => {\n      alert;\n    });\n  };\n\n  useEffect(() => {\n    if (params.id) {\n      fetch(\n        \"http://localhost:8082/ShoppingCartAdmin/category/get/\" + params.id,\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((result) => {\n          console.log(result);\n          setName(result.name);\n          setAlias(result.alias);\n          setEnabled(result.enabled);\n        });\n    }\n  }, []);\n  return (\n    <>\n      <div>\n        <h2 className=\"text-center\">Manage Category</h2>\n      </div>\n      <form\n        action=\"\"\n        method=\"post\"\n        style={{ maxWidth: \"700px\", margin: \"0 auto\" }}\n        //   style=\"max-wid 700px; margin: 0 auto;\"\n        //   object=\"${user}\"\n        //   enctype=\"multipart/form-data\"\n        //   onsubmit=\"return checkEmailUnique(this);\"\n      >\n        <div className=\"border border-secondary rounded p-3\">\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Name:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"8\"\n                maxLength=\"128\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Alias:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                required\n                minLength=\"2\"\n                maxLength=\"45\"\n                value={alias}\n                onChange={(e) => setAlias(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form label\">\n              Enabled:\n            </label>\n            <div className=\"col-sm-8\">\n              <input\n                type=\"checkbox\"\n                defaultChecked={enabled}\n                onChange={(e) => setEnabled(!enabled)}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group row\">\n            <label htmlFor=\"\" className=\"col-sm-4 col-form-label\">\n              Photos:{\" \"}\n            </label>\n            <div className=\"col-sm-8\">\n              {/* <input type=\"hidden\" field=\"*{photos}\" /> */}\n              <input\n                accept=\"image/*\"\n                id=\"upload-profile-image\"\n                type=\"file\"\n                onChange={handleUploadClick}\n              />\n              <img\n                src={\n                  imagePreview !== null\n                    ? imagePreview\n                    : \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\"\n                }\n                alt=\"Photos Review\"\n                id=\"thumbmail\"\n                className=\"img-fluid\"\n              />\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <input\n              type=\"submit\"\n              value=\"Save\"\n              className=\"btn btn-primary m-3\"\n              onClick={(e) => {\n                checkName(e);\n              }}\n            />\n            <input\n              type=\"button\"\n              value=\"Cancel\"\n              className=\"btn btn-secondary\"\n              id=\"buttonCancel\"\n              onClick={() => {\n                navigate(\"/categories\");\n              }}\n            />\n          </div>\n        </div>\n      </form>\n      <Modal\n        show={error === \"\" ? false : true}\n        onHide={() => {\n          setError(\"\");\n        }}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Oops! There was a problem</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{error}</Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"secondary\"\n            onClick={() => {\n              setError(\"\");\n            }}\n          >\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}